(this["webpackJsonpfungataua-crm-frontend"]=this["webpackJsonpfungataua-crm-frontend"]||[]).push([[16],{116:function(e,t,a){"use strict";var c=a(2),s=a.n(c),n=a(8),r=a(43),i=a(5),l=a(12),o=a(10);t.a=function(e){var t=e.url,a=e.method,c=e.data,d=e.headers,j=e.nextSuccess,u=e.nextError,b=e.initialValue,m=void 0===b?"":b,O=Object(i.useState)(m),p=Object(r.a)(O,2),x=p[0],h=p[1],g=Object(i.useState)(!1),f=Object(r.a)(g,2),v=f[0],y=f[1],N=Object(i.useState)(""),_=Object(r.a)(N,2),w=_[0],C=_[1];return[function(){var e=Object(n.a)(s.a.mark((function e(){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,C(null),y(!0),e.next=5,Object(l.a)({url:t,method:a,headers:d,data:c});case 5:(n=e.sent).data.success?(h(n.data.data),j&&j(n.data.data,h),y(!1)):(u&&u(n.data.error),y(!1),C(n.data.error)),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(0),Object(o.j)(e.t0),y(!1),C(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),v,w,x]}},120:function(e,t,a){"use strict";a(5);var c=a(274),s=a(275),n=a(105),r=a(114),i=a(6),l=a(14),o=function(e){return"/".concat(e)===i.d?Object(l.jsx)(r.a,{id:"menu.home"}):Object(l.jsx)(r.a,{id:"menu.".concat(e)})},d=function(e,t){return e.split(t)[0]+t},j=function(e){var t=e.match.path.substr(1),a=t.split("/");return a[a.length-1].indexOf(":")>-1&&(a=a.filter((function(e){return-1===e.indexOf(":")}))),Object(l.jsx)(l.Fragment,{children:Object(l.jsx)(c.a,{className:"pt-0 breadcrumb-container d-none d-sm-block d-lg-inline-block",children:a.map((function(e,c){return Object(l.jsx)(s.a,{active:a.length===c+1,children:a.length!==c+1?Object(l.jsx)(n.b,{to:"/".concat(d(t,e)),children:o(e)}):o(e)},c)}))})})};t.a=function(e){var t=e.heading,a=e.match;return Object(l.jsxs)(l.Fragment,{children:[t&&Object(l.jsx)("h1",{children:Object(l.jsx)(r.a,{id:t})}),Object(l.jsx)(j,{match:a})]})}},163:function(e,t,a){"use strict";var c=a(11),s=a(16),n=a(5),r=a.n(n),i=a(30),l=a.n(i),o=a(109),d=a.n(o),j=a(111),u={tag:j.q,className:l.a.string,cssModule:l.a.object},b=function(e){var t=e.className,a=e.cssModule,n=e.tag,i=Object(s.a)(e,["className","cssModule","tag"]),l=Object(j.m)(d()(t,"card-title"),a);return r.a.createElement(n,Object(c.a)({},i,{className:l}))};b.propTypes=u,b.defaultProps={tag:"div"},t.a=b},230:function(e,t,a){"use strict";var c=a(11),s=a(16),n=a(5),r=a.n(n),i=a(30),l=a.n(i),o=a(109),d=a.n(o),j=a(111),u=a(118),b=a(18),m={className:l.a.string,id:l.a.oneOfType([l.a.string,l.a.number]).isRequired,label:l.a.node,valid:l.a.bool,invalid:l.a.bool,bsSize:l.a.string,htmlFor:l.a.string,cssModule:l.a.object,onChange:l.a.func,children:l.a.oneOfType([l.a.node,l.a.array,l.a.func]),innerRef:l.a.oneOfType([l.a.object,l.a.string,l.a.func])},O=function(e){function t(t){var a;return(a=e.call(this,t)||this).state={files:null},a.onChange=a.onChange.bind(Object(u.a)(a)),a}Object(b.a)(t,e);var a=t.prototype;return a.onChange=function(e){var t=e.target,a=this.props.onChange,c=this.getSelectedFiles(t);"function"===typeof a&&a.apply(void 0,arguments),this.setState({files:c})},a.getSelectedFiles=function(e){if(this.props.multiple&&e.files)return[].slice.call(e.files).map((function(e){return e.name})).join(", ");if(-1!==e.value.indexOf("fakepath")){var t=e.value.split("\\");return t[t.length-1]}return e.value},a.render=function(){var e=this.props,t=e.className,a=e.label,n=e.valid,i=e.invalid,l=e.cssModule,o=e.children,u=(e.bsSize,e.innerRef),b=e.htmlFor,m=(e.type,e.onChange,e.dataBrowse),O=e.hidden,p=Object(s.a)(e,["className","label","valid","invalid","cssModule","children","bsSize","innerRef","htmlFor","type","onChange","dataBrowse","hidden"]),x=Object(j.m)(d()(t,"custom-file"),l),h=Object(j.m)(d()(i&&"is-invalid",n&&"is-valid"),l),g=b||p.id,f=this.state.files;return r.a.createElement("div",{className:x,hidden:O||!1},r.a.createElement("input",Object(c.a)({type:"file"},p,{ref:u,"aria-invalid":i,className:d()(h,Object(j.m)("custom-file-input",l)),onChange:this.onChange})),r.a.createElement("label",{className:Object(j.m)("custom-file-label",l),htmlFor:g,"data-browse":m},f||a||"Choose file"),o)},t}(r.a.Component);O.propTypes=m;var p=O,x={className:l.a.string,id:l.a.oneOfType([l.a.string,l.a.number]).isRequired,type:l.a.string.isRequired,label:l.a.node,inline:l.a.bool,valid:l.a.bool,invalid:l.a.bool,bsSize:l.a.string,htmlFor:l.a.string,cssModule:l.a.object,children:l.a.oneOfType([l.a.node,l.a.array,l.a.func]),innerRef:l.a.oneOfType([l.a.object,l.a.string,l.a.func])};function h(e){var t=e.className,a=e.label,n=e.inline,i=e.valid,l=e.invalid,o=e.cssModule,u=e.children,b=e.bsSize,m=e.innerRef,O=e.htmlFor,x=Object(s.a)(e,["className","label","inline","valid","invalid","cssModule","children","bsSize","innerRef","htmlFor"]),h=x.type,g=Object(j.m)(d()(t,"custom-"+h,!!b&&"custom-"+h+"-"+b),o),f=Object(j.m)(d()(l&&"is-invalid",i&&"is-valid"),o),v=O||x.id;if("select"===h){x.type;var y=Object(s.a)(x,["type"]);return r.a.createElement("select",Object(c.a)({},y,{ref:m,className:d()(f,g),"aria-invalid":l}),u)}if("file"===h)return r.a.createElement(p,e);if("checkbox"!==h&&"radio"!==h&&"switch"!==h)return r.a.createElement("input",Object(c.a)({},x,{ref:m,"aria-invalid":l,className:d()(f,g)}));var N=d()(g,Object(j.m)(d()("custom-control",{"custom-control-inline":n}),o)),_=x.hidden,w=Object(s.a)(x,["hidden"]);return r.a.createElement("div",{className:N,hidden:_||!1},r.a.createElement("input",Object(c.a)({},w,{type:"switch"===h?"checkbox":h,ref:m,"aria-invalid":l,className:d()(f,Object(j.m)("custom-control-input",o))})),r.a.createElement("label",{className:Object(j.m)("custom-control-label",o),htmlFor:v},a),u)}h.propTypes=x;t.a=h},276:function(e,t,a){"use strict";var c=a(11),s=a(16),n=a(5),r=a.n(n),i=a(30),l=a.n(i),o=a(109),d=a.n(o),j=a(111),u={tag:j.q,className:l.a.string,cssModule:l.a.object,innerRef:l.a.oneOfType([l.a.object,l.a.string,l.a.func])},b=function(e){var t=e.className,a=e.cssModule,n=e.innerRef,i=e.tag,l=Object(s.a)(e,["className","cssModule","innerRef","tag"]),o=Object(j.m)(d()(t,"card-body"),a);return r.a.createElement(i,Object(c.a)({},l,{className:o,ref:n}))};b.propTypes=u,b.defaultProps={tag:"div"},t.a=b},337:function(e,t,a){"use strict";a.r(t);var c=a(0),s=a(43),n=a(5),r=a.n(n),i=a(206),l=a(44),o=a(113),d=a(120),j=a(1),u=a(162),b=a(276),m=a(203),O=a(323),p=a(163),x=a(119),h=a(109),g=a.n(h),f=a(353),v=a(354),y=a(14),N=function(e){var t=e.totalPage,a=void 0===t?0:t,c=e.currentPage,s=void 0===c?1:c,n=e.numberLimit,r=void 0===n?5:n,i=e.lastIsActive,l=void 0===i||i,d=e.firstIsActive,j=void 0===d||d,u=e.onChangePage,b=1,m=r;r>a?(b=1,m=a):s<=parseInt(r/2,10)?(b=1,m=r):s+parseInt(r/2,10)<=a?(b=s-parseInt(r/2,10),m=s+parseInt(r/2,10)):(b=a-(r-1),m=a);for(var p=[],x=b=0===b?1:b;x<=m;x+=1)p.push(x);var h=s<=1?"disabled":"",g=s>=a?"disabled":"",N=s<=1?"disabled":"",_=s>=a?"disabled":"";return a>1?Object(y.jsx)(o.a,{xxs:"12",className:"mt-3 mb-3",children:Object(y.jsxs)(f.a,{className:"pagination justify-content-center",children:[j&&Object(y.jsx)(v.a,{className:"page-item ".concat(h),children:Object(y.jsx)(O.a,{className:"page-link first c-pointer",onClick:function(){return u(1)},children:Object(y.jsx)("i",{className:"simple-icon-control-start"})})}),Object(y.jsx)(v.a,{className:"page-item ".concat(N),children:Object(y.jsx)(O.a,{className:"page-link prev c-pointer",onClick:function(){return u(s-1)},children:Object(y.jsx)("i",{className:"simple-icon-arrow-left"})})}),p.map((function(e){return Object(y.jsx)(v.a,{className:"page-item ".concat(s===e&&"active"),children:Object(y.jsx)(O.a,{className:"page-link c-pointer",onClick:function(){return u(e)},children:e})},e)})),Object(y.jsx)(v.a,{className:"page-item ".concat(_),children:Object(y.jsx)(O.a,{className:"page-link next c-pointer",onClick:function(){return u(s+1)},children:Object(y.jsx)("i",{className:"simple-icon-arrow-right"})})}),l&&Object(y.jsx)(v.a,{className:"page-item ".concat(g),children:Object(y.jsx)(O.a,{className:"page-link last c-pointer",onClick:function(){return u(a)},children:Object(y.jsx)("i",{className:"simple-icon-control-end"})})})]})}):Object(y.jsx)(o.a,{xxs:"12",className:"mt-2"})},_=a(114),w=a(6),C=function(){return Object(y.jsx)(u.a,{className:"d-flex flex-row mb-4",children:Object(y.jsx)("div",{className:"pl-2 d-flex flex-grow-1 min-width-zero",children:Object(y.jsxs)("div",{className:"card-body align-self-center d-flex flex-column flex-lg-row justify-content-between min-width-zero align-items-lg-center",children:[Object(y.jsx)("p",{className:"mb-0 truncate w-5 w-sm-100",children:"#"}),Object(y.jsx)("p",{className:"mb-0 w-12 text-center w-sm-100",children:"Date of visit"}),Object(y.jsx)("p",{className:"mb-0 w-12 text-center w-sm-100",children:"Added by"}),Object(y.jsx)("p",{className:"mb-0 w-12 text-center w-sm-100",children:"Referral"}),Object(y.jsx)("p",{className:"mb-0 w-12 text-center w-sm-100",children:"Referred By"}),Object(y.jsx)("p",{className:"mb-0 w-12 text-center w-sm-100",children:"Category"}),Object(y.jsx)("p",{className:"mb-0 w-12 text-center w-sm-100",children:"Sub Category"}),Object(y.jsx)("p",{className:"mb-0 w-12 text-center w-sm-100",children:"Status"}),Object(y.jsx)("p",{className:"mb-0 w-20 text-center w-sm-100",children:"Notes"})]})})})},k=function(e){var t=e.item,a=e.isSelect,c=e.collect,s=e.openEdit,n=e.setSelectedItem,r=e.showEdit,i=t.id,l=t.added_by,d=t.category,j=t.date_of_visit,b=t.remarks,m=t.service_name,O=t.status,p=t.subcategory,h=t.refered_by;return Object(y.jsx)(o.a,{xxs:"12",className:"mb-3",children:Object(y.jsx)(x.b,{id:"service_table_id",data:t,collect:c,children:Object(y.jsx)(u.a,{className:g()("d-flex flex-row",{active:a}),children:Object(y.jsx)("div",{className:"pl-2 d-flex flex-grow-1 min-width-zero",children:Object(y.jsxs)("div",{className:"card-body align-self-center d-flex flex-column flex-lg-row justify-content-between min-width-zero align-items-lg-center",children:[Object(y.jsx)("p",{className:"mb-0 truncate w-5 w-sm-100",children:i}),Object(y.jsx)("p",{className:"mb-0 w-12 text-center w-sm-100",children:j}),Object(y.jsx)("p",{className:"mb-0 w-12 text-center w-sm-100",children:l}),Object(y.jsx)("p",{className:"mb-0 w-12 text-center w-sm-100",children:m}),Object(y.jsx)("p",{className:"mb-0 w-12 text-center w-sm-100",children:h}),Object(y.jsx)("p",{className:"mb-0 w-12 text-center w-sm-100",children:d}),Object(y.jsx)("p",{className:"mb-0 w-12 text-center w-sm-100",children:p}),Object(y.jsx)("p",{className:"mb-0 w-12 text-center w-sm-100",children:O}),Object(y.jsx)("p",{className:"mb-0 w-20 text-center w-sm-100",children:b}),r&&Object(y.jsx)("p",{className:"mb-0 w-5 w-sm-100 text-center align-itms-end",children:Object(y.jsx)("i",{className:"m-0 h6 text-primary simple-icon-pencil",onClick:function(){s(),n(t)}})})]})})})})})};function S(e){return{data:e.data}}var E=function(e){var t=e.id,a=e.items,c=e.currentPage,s=e.totalPage,n=e.onChangePage,r=e.openNew,l=e.openEdit,o=e.setSelectedItem,d=e.showAdd,j=e.showEdit,x=e.isSuperAdmin;return Object(y.jsx)(u.a,{children:Object(y.jsxs)(b.a,{className:"my-2",children:[d&&Object(y.jsx)(m.a,{className:"absolute top-right-button-container mx-2",onClick:r,color:"primary",size:"sm",children:Object(y.jsx)("span",{children:" Add"})}),x&&Object(y.jsx)(O.a,{className:"absolute top-right-button-container",color:"secondary",size:"sm",href:"".concat(w.a,"/dashboard/download-client-service-report/").concat(t),target:"_blank",children:Object(y.jsx)("i",{className:"simple-icon-cloud-download h5 text-primary"})}),Object(y.jsx)(p.a,{className:"my-3",children:Object(y.jsx)(_.a,{id:"pages.client-service-table"})}),Object(y.jsx)(C,{showEdit:j,openEdit:l}),Object(y.jsxs)(i.a,{children:[a.map((function(e){return Object(y.jsx)(k,{item:e,collect:S,openEdit:l,setSelectedItem:o},e.id)})),Object(y.jsx)(N,{currentPage:c,totalPage:s,onChangePage:function(e){return n(e)}})]})]})})},A=a(209),T=a(360),M=function(e){var t=e?new Date(e):new Date,a=t.getDate(),c=t.getMonth()+1,s=t.getFullYear();return a<10&&(a="0".concat(a)),c<10&&(c="0".concat(c)),"".concat(a,"-").concat(c,"-").concat(s)},P=[{value:"male",label:"Male"},{value:"female",label:"Female"}],z=function(e){return e?P.find((function(t){return t.value===e})).label:""},q=function(e){var t=e.currentClient,a=t.first_name,c=t.last_name,s=t.email,n=t.phone_number,r=t.date_of_birth,l=t.gender,d=t.address,j=t.city,m=t.ethinicity,O=t.emergency_phone_number;return Object(y.jsx)(u.a,{children:Object(y.jsxs)(b.a,{children:[Object(y.jsxs)(i.a,{children:[Object(y.jsxs)(o.a,{children:[Object(y.jsx)(A.a,{className:"mt-4",children:Object(y.jsx)(_.a,{id:"pages.client-first-name"})}),Object(y.jsx)(T.a,{id:"first_name",value:a,readOnly:!0})]}),Object(y.jsxs)(o.a,{children:[Object(y.jsx)(A.a,{className:"mt-4",children:Object(y.jsx)(_.a,{id:"pages.client-last-name"})}),Object(y.jsx)(T.a,{id:"last_name",value:c,readOnly:!0})]})]}),Object(y.jsxs)(i.a,{children:[Object(y.jsxs)(o.a,{children:[Object(y.jsx)(A.a,{className:"mt-4",children:Object(y.jsx)(_.a,{id:"pages.client-date-of-birth"})}),Object(y.jsx)(T.a,{id:"date-of-birth",value:M(r),readOnly:!0})]}),Object(y.jsxs)(o.a,{children:[Object(y.jsx)(A.a,{className:"mt-4",children:Object(y.jsx)(_.a,{id:"pages.client-gender"})}),Object(y.jsx)(T.a,{id:"gender",value:z(l),readOnly:!0})]})]}),Object(y.jsxs)(i.a,{children:[Object(y.jsxs)(o.a,{children:[Object(y.jsx)(A.a,{className:"mt-4",children:Object(y.jsx)(_.a,{id:"pages.client-ethinicity"})}),Object(y.jsx)(T.a,{id:"ethinicity",value:m,readOnly:!0})]}),Object(y.jsxs)(o.a,{children:[Object(y.jsx)(A.a,{className:"mt-4",children:Object(y.jsx)(_.a,{id:"pages.user-phone"})}),Object(y.jsx)(T.a,{id:"phone_number",value:n,readOnly:!0})]})]}),Object(y.jsxs)(i.a,{children:[Object(y.jsxs)(o.a,{children:[Object(y.jsx)(A.a,{className:"mt-4",children:Object(y.jsx)(_.a,{id:"pages.user-email"})}),Object(y.jsx)(T.a,{id:"email",value:s,readOnly:!0})]}),Object(y.jsxs)(o.a,{children:[Object(y.jsx)(A.a,{className:"mt-4",children:Object(y.jsx)(_.a,{id:"pages.client-emergency-phone"})}),Object(y.jsx)(T.a,{id:"emergency_phone_number",value:O,placeholder:"987XX XX789",readOnly:!0})]})]}),Object(y.jsx)(A.a,{className:"mt-4",children:Object(y.jsx)(_.a,{id:"pages.client-address"})}),Object(y.jsx)(T.a,{id:"address",type:"textarea",rows:"6",value:d,readOnly:!0}),Object(y.jsx)(i.a,{children:Object(y.jsxs)(o.a,{className:"mt-4 mb-2",children:[Object(y.jsx)(A.a,{children:Object(y.jsx)(_.a,{id:"pages.client-city"})}),Object(y.jsx)(T.a,{id:"city",value:j,readOnly:!0})]})})]})})},F=a(11),R=a(16),I=a(30),D=a.n(I),U=a(111),L={tag:U.q,size:D.a.string,className:D.a.string,cssModule:D.a.object},V=function(e){var t=e.className,a=e.cssModule,c=e.tag,s=e.size,n=Object(R.a)(e,["className","cssModule","tag","size"]),i=Object(U.m)(g()(t,"input-group",s?"input-group-"+s:null),a);return r.a.createElement(c,Object(F.a)({},n,{className:i}))};V.propTypes=L,V.defaultProps={tag:"div"};var B=V,X={tag:U.q,className:D.a.string,cssModule:D.a.object},J=function(e){var t=e.className,a=e.cssModule,c=e.tag,s=Object(R.a)(e,["className","cssModule","tag"]),n=Object(U.m)(g()(t,"input-group-text"),a);return r.a.createElement(c,Object(F.a)({},s,{className:n}))};J.propTypes=X,J.defaultProps={tag:"span"};var K=J,Y={tag:U.q,addonType:D.a.oneOf(["prepend","append"]).isRequired,children:D.a.node,className:D.a.string,cssModule:D.a.object},G=function(e){var t=e.className,a=e.cssModule,c=e.tag,s=e.addonType,n=e.children,i=Object(R.a)(e,["className","cssModule","tag","addonType","children"]),l=Object(U.m)(g()(t,"input-group-"+s),a);return"string"===typeof n?r.a.createElement(c,Object(F.a)({},i,{className:l}),r.a.createElement(K,{children:n})):r.a.createElement(c,Object(F.a)({},i,{className:l,children:n}))};G.propTypes=Y,G.defaultProps={tag:"div"};var H=G,Q=a(117),W=a(10),Z=a(116),$=a(2),ee=a.n($),te=a(8),ae=a(380),ce=a(358),se=a(359),ne=a(230),re=a(361),ie=Object(l.b)((function(e){return{accessToken:e.authUser.accessToken}}),{})((function(e){var t=e.id,a=e.modalOpen,r=e.toggleModal,i=e.accessToken,l=e.refresh,o=Object(n.useState)({email:t,file:{type:"image/png"}}),d=Object(s.a)(o,2),j=d[0],u=d[1],b=Object(Z.a)({url:"/client/add-client-file",method:"POST",headers:{Authorization:i,"Content-Type":j.file.type},data:j.formData,nextSuccess:function(){Q.b.success("Image Added Successfully","Image Operation Success",3e3,null,null,""),r(!1),l()},nextError:function(e){Q.b.error("error","Image Operation Error",3e3,null,null,"")}}),O=Object(s.a)(b,2),p=O[0],x=O[1],h=function(){var e=Object(te.a)(ee.a.mark((function e(a){var s,n;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=a.target.files[0],(n=new FormData).append("image",s,s.name),n.append("email",t),n.append("image_name",s.name),u(Object(c.a)(Object(c.a)({},j),{},{image_name:s.name,file:s,image:{},formData:n}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(y.jsxs)(ae.a,{isOpen:a,toggle:function(){r(!1)},size:"lg",backdrop:"static",children:[Object(y.jsx)(ce.a,{toggle:function(){r(!1)},children:Object(y.jsx)(_.a,{id:"pages.add-client-image-modal-title"})}),Object(y.jsx)(se.a,{children:Object(y.jsx)(ne.a,{type:"file",id:"image_name",value:j.url,onChange:h})}),Object(y.jsxs)(re.a,{children:[Object(y.jsx)(m.a,{color:"danger",outline:!0,onClick:function(){r(!1)},children:Object(y.jsx)(_.a,{id:"pages.cancel"})}),Object(y.jsxs)(m.a,{id:"add-new-user",color:"primary",className:"btn-shadow btn-multiple-state ".concat(x?"show-spinner":""),onClick:function(){p()},children:[Object(y.jsxs)("span",{className:"spinner d-inline-block",children:[Object(y.jsx)("span",{className:"bounce1"}),Object(y.jsx)("span",{className:"bounce2"}),Object(y.jsx)("span",{className:"bounce3"})]}),Object(y.jsx)("span",{className:"label",children:Object(y.jsx)(_.a,{id:"pages.submit"})})]})]})]})}));function le(e){return{data:e.data}}var oe=Object(l.b)((function(e){return{accessToken:e.authUser.accessToken}}),{})((function(e){var t=e.id,a=e.accessToken,c=e.showAdd,r=e.showEdit,i=Object(n.useState)(!1),l=Object(s.a)(i,2),o=l[0],d=l[1],j=Object(n.useState)({id:-1}),O=Object(s.a)(j,2),h=O[0],g=O[1],f=Object(n.useState)([]),v=Object(s.a)(f,2),N=v[0],C=v[1],k=Object(Z.a)({url:"/client/get-client-file/".concat(t),headers:{Authorization:a}}),S=Object(s.a)(k,4),E=S[0],A=S[1],M=S[2],P=S[3],z=Object(Z.a)({url:"/client/delete-client-file/".concat(h.id),method:"DELETE",headers:{Authorization:a},nextSuccess:function(){Q.b.success("Image Deleted Successfully","Image Operation Success",3e3,null,null,""),E()},nextError:function(e){Q.b.error(e,"Image Operation Error",3e3,null,null,"")}}),q=Object(s.a)(z,1)[0];if(Object(n.useEffect)((function(){E()}),[]),Object(n.useEffect)((function(){C(P.files)}),[P]),A)return Object(y.jsx)("div",{className:"loading"});M&&Object(W.j)(M);return Object(y.jsxs)(u.a,{children:[Object(y.jsxs)(b.a,{children:[c&&Object(y.jsx)(m.a,{className:"absolute a top-right-button-container",onClick:function(){return d(!0)},color:"primary",children:Object(y.jsx)("i",{className:"simple-icon-cloud-upload"})}),Object(y.jsx)(p.a,{children:Object(y.jsx)(_.a,{id:"pages.client-documents"})}),Object(y.jsx)("div",{className:"row",children:N&&N.map((function(e){return Object(y.jsx)("div",{className:"col-12",children:Object(y.jsx)(x.b,{id:"image_table_id",data:e,collect:le,children:Object(y.jsxs)(B,{className:"mb-4",children:[Object(y.jsx)(T.a,{value:e.file_name,readOnly:!0}),Object(y.jsx)(H,{addonType:"append",children:Object(y.jsx)(m.a,{color:"primary",href:"".concat(w.a,"/client/download-client-file/").concat(e.id),children:Object(y.jsx)("i",{className:"simple-icon-cloud-download"})})})]})})},e.id)}))}),Object(y.jsx)(x.a,{id:"image_table_id",style:{borderRadius:"16px"},onShow:function(e){return t=e.detail.data,g(t.data),!0;var t},children:r&&Object(y.jsxs)(x.c,{onClick:function(e,t){switch(t.action){case"delete":g(t.data),Object(W.p)(w.k,(function(){q()}))}},data:{action:"delete"},className:"text-primary",children:[Object(y.jsx)("i",{className:"simple-icon-trash"})," ",Object(y.jsx)("span",{children:"Delete"})]})})]}),Object(y.jsx)(ie,{id:t,modalOpen:o,toggleModal:d,refresh:E})]})})),de=a(45),je=a(127),ue=Object(l.b)((function(e){var t=e.authUser,a=e.clientsApp,c=e.statusApp,s=e.serviceApp,n=e.categoryApp,r=t.accessToken,i=t.currentUser,l=a.currentClient,o=a.filters;return{accessToken:r,currentUser:i,currentClient:l,status:c.status,service:s.service,category:n.category,filters:o}}),{})((function(e){var t=e.id,a=e.data,r=e.modalOpen,l=e.toggleModal,d=e.accessToken,j=e.currentUser,u=e.currentClient,b=e.status,O=e.service,p=e.category,x=e.refresh,h=Object(n.useState)(Object(c.a)(Object(c.a)({},a),{},{email:t,added_by:j.id,__services:O.data.find((function(e){return e.service_name===a.service_name})),__status:"",__category:{sub_category:[]},__subcategory:[]})),g=Object(s.a)(h,2),f=g[0],v=g[1],N=Object(n.useState)({}),w=Object(s.a)(N,2),C=w[0],k=w[1];Object(n.useEffect)((function(){v(Object(c.a)(Object(c.a)({},a),{},{__services:O.data.find((function(e){return e.service_name===a.service_name})),__status:b.data.find((function(e){return e.status===a.status})),__category:p.data.find((function(e){return e.category_name===a.category}))}))}),[a]),Object(n.useEffect)((function(){v(Object(c.a)(Object(c.a)({},f),{},{__subcategory:f.__category?f.__category.sub_category:[]}))}),[f.__category]);var S=function(e){Object(W.j)(Object(de.a)({},e.target.id,e.target.value)),v(Object(c.a)(Object(c.a)({},f),{},Object(de.a)({},e.target.id,e.target.value)))},E=Object(Z.a)({url:"/client/edit-client-service/".concat(f.id),method:"PUT",headers:{Authorization:d},data:C,nextSuccess:function(){Q.b.success("Service Edited Successfully","Client Operation Success",3e3,null,null,""),x(),l(!1)},nextError:function(e){Q.b.error(e,"Client Operation Error",3e3,null,null,"")}}),M=Object(s.a)(E,2),P=M[0],z=M[1],q=function(e,t){var a;e&&(Object(W.j)(Object(de.a)({},t,e.id)),v(Object(c.a)(Object(c.a)({},f),{},(a={},Object(de.a)(a,"__".concat(t),e),Object(de.a)(a,t,e.id),a))))};return Object(y.jsxs)(ae.a,{isOpen:r,toggle:function(){l(!1)},size:"lg",backdrop:"static",children:[Object(y.jsx)(ce.a,{toggle:function(){l(!1)},children:Object(y.jsx)(_.a,{id:"pages.edit-client-service-modal-title"})}),Object(y.jsxs)(se.a,{children:[Object(y.jsxs)(i.a,{children:[Object(y.jsxs)(o.a,{children:[Object(y.jsx)(A.a,{className:"mt-4",children:Object(y.jsx)(_.a,{id:"pages.app-service-required"})}),Object(y.jsx)(je.a,{id:"service",value:f.__services,required:!0,isClearable:!0,className:"react-select mt-2",classNamePrefix:"react-select",getOptionValue:function(e){return e.id},getOptionLabel:function(e){return e.service_name},onChange:function(e){return q(e,"services")},options:O.data})]}),Object(y.jsxs)(o.a,{children:[Object(y.jsx)(A.a,{className:"mt-4",children:Object(y.jsx)(_.a,{id:"pages.app-referred-by"})}),Object(y.jsx)(T.a,{id:"referred_by",className:"mt-2",onChange:S})]})]}),Object(y.jsxs)(i.a,{children:[Object(y.jsxs)(o.a,{children:[Object(y.jsx)(A.a,{className:"mt-4",children:Object(y.jsx)(_.a,{id:"pages.app-category-required"})}),Object(y.jsx)(je.a,{id:"category",value:f.__category,required:!0,isClearable:!0,className:"react-select mt-2",classNamePrefix:"react-select",getOptionValue:function(e){return e.id},getOptionLabel:function(e){return e.category_name},onChange:function(e){return q(e,"category")},options:p.data})]}),Object(y.jsxs)(o.a,{children:[Object(y.jsx)(A.a,{className:"mt-4",children:Object(y.jsx)(_.a,{id:"pages.app-sub-category-required"})}),Object(y.jsx)(je.a,{id:"subcategory",className:"react-select mt-2",classNamePrefix:"react-select",value:f.__subcategory,getOptionValue:function(e){return e.id},getOptionLabel:function(e){return e.subcategory_name},onChange:function(e){return q(e,"subcategory")},options:f.__subcategory||[],isClearable:!0,required:!0})]})]}),Object(y.jsx)(A.a,{className:"mt-4",children:Object(y.jsx)(_.a,{id:"pages.app-status-required"})}),Object(y.jsx)(je.a,{id:"status",className:"react-select mt-2",classNamePrefix:"react-select",value:f.__status,getOptionValue:function(e){return e.id},getOptionLabel:function(e){return e.status},onChange:function(e){return q(e,"status")},options:b.data,isClearable:!0,required:!0}),Object(y.jsx)(A.a,{className:"mt-4",children:Object(y.jsx)(_.a,{id:"pages.app-remarks"})}),Object(y.jsx)(T.a,{id:"remarks",type:"textarea",rows:"6",value:f.remarks,onChange:S})]}),Object(y.jsxs)(re.a,{children:[Object(y.jsx)(m.a,{color:"danger",outline:!0,onClick:function(){l(!1)},children:Object(y.jsx)(_.a,{id:"pages.cancel"})}),Object(y.jsxs)(m.a,{id:"add-new-user",color:"primary",className:"btn-shadow btn-multiple-state ".concat(z?"show-spinner":""),onClick:function(){k({email:u.id,added_by:j.id,remarks:f.remarks,services:f.__services.id,status:f.__status.id,category:f.__category.id,subcategory:f.__category.sub_category[0].id}),P()},children:[Object(y.jsxs)("span",{className:"spinner d-inline-block",children:[Object(y.jsx)("span",{className:"bounce1"}),Object(y.jsx)("span",{className:"bounce2"}),Object(y.jsx)("span",{className:"bounce3"})]}),Object(y.jsx)("span",{className:"label",children:Object(y.jsx)(_.a,{id:"pages.submit"})})]})]})]})})),be=Object(l.b)((function(e){var t=e.authUser,a=e.clientsApp,c=e.statusApp,s=e.serviceApp,n=e.categoryApp,r=t.accessToken,i=t.currentUser,l=a.currentClient,o=a.filters;return{accessToken:r,currentUser:i,currentClient:l,status:c.status,service:s.service,category:n.category,filters:o}}),{})((function(e){var t=e.id,a=e.modalOpen,r=e.toggleModal,l=e.accessToken,d=e.currentUser,j=e.status,u=e.service,b=e.category,O=e.refresh,p=function(){return{email:t,added_by:d.id,services:"",_services:"",status:"",_status:"",category:"",_category:"",subcategory:[],_subcategory:[],remarks:""}},x=Object(n.useState)(p),h=Object(s.a)(x,2),g=h[0],f=h[1],v=function(e){f(Object(c.a)(Object(c.a)({},g),{},Object(de.a)({},e.target.id,e.target.value)))},N=Object(Z.a)({url:"/client/add-client-service",method:"POST",headers:{Authorization:l},data:g,nextSuccess:function(){Q.b.success("Service Added Successfully","Client Operation Success",3e3,null,null,""),O(),r(!1),Object(W.p)(1200,(function(){f(p)}))},nextError:function(e){Q.b.error(e,"Client Operation Error",3e3,null,null,"")}}),w=Object(s.a)(N,2),C=w[0],k=w[1],S=function(e,t){var a;e&&("category"===t&&(Object(W.j)("test",g),f(Object(c.a)(Object(c.a)({},g),{},{_subcategory:"",subcategory:""})),Object(W.j)("test 2",g)),Object(W.j)("test 3",g),f(Object(c.a)(Object(c.a)({},g),{},(a={},Object(de.a)(a,"_".concat(t),e),Object(de.a)(a,t,e.id),a))))};return Object(y.jsxs)(ae.a,{isOpen:a,toggle:function(){r(!1),f(p)},size:"lg",backdrop:"static",children:[Object(y.jsx)(ce.a,{toggle:function(){r(!1),f(p)},children:Object(y.jsx)(_.a,{id:"pages.add-new-client-service-modal-title"})}),Object(y.jsxs)(se.a,{children:[Object(y.jsxs)(i.a,{children:[Object(y.jsxs)(o.a,{children:[Object(y.jsx)(A.a,{className:"mt-4",children:Object(y.jsx)(_.a,{id:"pages.app-service-required"})}),Object(y.jsx)(je.a,{id:"service",value:g._services,required:!0,isClearable:!0,className:"react-select mt-2",classNamePrefix:"react-select",getOptionValue:function(e){return e.id},getOptionLabel:function(e){return e.service_name},onChange:function(e){return S(e,"services")},options:u.data,isOptionDisabled:function(e){return!1===e.is_enabled}})]}),Object(y.jsxs)(o.a,{children:[Object(y.jsx)(A.a,{className:"mt-4",children:Object(y.jsx)(_.a,{id:"pages.app-referred-by"})}),Object(y.jsx)(T.a,{id:"refered_by",className:"mt-2",onChange:v})]})]}),Object(y.jsxs)(i.a,{children:[Object(y.jsxs)(o.a,{children:[Object(y.jsx)(A.a,{className:"mt-4",children:Object(y.jsx)(_.a,{id:"pages.app-category-required"})}),Object(y.jsx)(je.a,{id:"category",value:g._category,required:!0,isClearable:!0,className:"react-select mt-2",classNamePrefix:"react-select",getOptionValue:function(e){return e.id},getOptionLabel:function(e){return e.category_name},onChange:function(e){return S(e,"category")},options:b.data,isOptionDisabled:function(e){return!1===e.is_enabled}})]}),Object(y.jsxs)(o.a,{children:[Object(y.jsx)(A.a,{className:"mt-4",children:Object(y.jsx)(_.a,{id:"pages.app-sub-category-required"})}),Object(y.jsx)(je.a,{id:"subcategory",className:"react-select mt-2",classNamePrefix:"react-select",value:g._subcategory,getOptionValue:function(e){return e.id},getOptionLabel:function(e){return e.subcategory_name},onChange:function(e){return S(e,"subcategory")},options:g._category.sub_category||[],isClearable:!0,required:!0,isOptionDisabled:function(e){return!1===e.is_enabled}})]})]}),Object(y.jsx)(A.a,{className:"mt-4",children:Object(y.jsx)(_.a,{id:"pages.app-status-required"})}),Object(y.jsx)(je.a,{id:"status",className:"react-select",classNamePrefix:"react-select",value:g._status,getOptionValue:function(e){return e.id},getOptionLabel:function(e){return e.status},onChange:function(e){return S(e,"status")},options:j.data,isClearable:!0,required:!0,isOptionDisabled:function(e){return!1===e.is_enabled}}),Object(y.jsx)(A.a,{className:"mt-4",children:Object(y.jsx)(_.a,{id:"pages.app-remarks"})}),Object(y.jsx)(T.a,{id:"remarks",type:"textarea",rows:"6",value:g.remarks,onChange:v})]}),Object(y.jsxs)(re.a,{children:[Object(y.jsx)(m.a,{color:"danger",outline:!0,onClick:function(){r(!1),f(p)},children:Object(y.jsx)(_.a,{id:"pages.cancel"})}),Object(y.jsxs)(m.a,{id:"add-new-user",color:"primary",className:"btn-shadow btn-multiple-state ".concat(k?"show-spinner":""),onClick:function(){C()},children:[Object(y.jsxs)("span",{className:"spinner d-inline-block",children:[Object(y.jsx)("span",{className:"bounce1"}),Object(y.jsx)("span",{className:"bounce2"}),Object(y.jsx)("span",{className:"bounce3"})]}),Object(y.jsx)("span",{className:"label",children:Object(y.jsx)(_.a,{id:"pages.submit"})})]})]})]})})),me=function(e){var t=e.onContextMenuClick,a=e.showButtons,c=a.showAdd,s=a.showEdit;return c&&s?Object(y.jsxs)(x.a,{id:"service_table_id",style:{borderRadius:"16px"},children:[s&&Object(y.jsxs)(x.c,{onClick:t,data:{action:"edit"},className:"text-primary",children:[Object(y.jsx)("i",{className:"simple-icon-pencil"})," ",Object(y.jsx)("span",{children:"Edit"})]}),c&&Object(y.jsxs)(x.c,{onClick:t,data:{action:"create-new"},className:"text-primary",children:[Object(y.jsx)("i",{className:"simple-icon-plus"})," ",Object(y.jsx)("span",{children:"Add New"})]})]}):null};t.default=Object(l.b)((function(e){var t=e.authUser,a=e.clientsApp,c=e.statusApp,s=e.serviceApp,n=e.categoryApp;return{accessToken:t.accessToken,currentUser:t.currentUser,statusFilters:c.filters,serviceFilters:s.filters,categoryFilters:n.filters,currentClient:a.currentClient,currentClientServices:a.currentClientServices,loading:a.loading,message:a.message,error:a.error}}),{getClientAction:j.Ob,getAllServiceAction:j.Lb,getAllStatusAction:j.Mb,getAllCategoryAction:j.Kb})((function(e){var t=e.match,a=e.accessToken,r=e.currentUser,l=e.currentClient,j=e.currentClientServices,u=e.getClientAction,b=e.statusFilters,m=e.serviceFilters,O=e.categoryFilters,p=e.getAllServiceAction,x=e.getAllStatusAction,h=e.getAllCategoryAction,g=e.loading,f=t.params.id,v=j.data,N=r.client_add,_=r.client_edit,w=r.is_superadmin,C=Object(n.useState)(!1),k=Object(s.a)(C,2),S=k[0],A=k[1],T=Object(n.useState)(!1),M=Object(s.a)(T,2),P=M[0],z=M[1],F=Object(n.useState)((function(){return{id:0,date_of_visit:new Date,added_by:"",service_name:"",category:"",subcategory:"",status:"",remarks:""}})),R=Object(s.a)(F,2),I=R[0],D=R[1];Object(n.useEffect)((function(){u(a,f),p(a,Object(c.a)(Object(c.a)({},m),{},{selectedPageSize:"max"})),x(a,Object(c.a)(Object(c.a)({},b),{},{selectedPageSize:"max"})),h(a,Object(c.a)(Object(c.a)({},O),{},{selectedPageSize:"max"}))}),[]);return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(i.a,{children:Object(y.jsxs)(o.a,{xxs:"12",children:[Object(y.jsx)(d.a,{heading:"menu.client-details",match:t}),Object(y.jsx)(o.b,{className:"mb-5"})]})}),Object(y.jsxs)(i.a,{children:[Object(y.jsx)(o.a,{xxs:"12",md:"7",className:"mb-4",children:Object(y.jsx)(q,{currentClient:l})}),Object(y.jsx)(o.a,{xxs:"12",md:"5",className:"mb-4",children:Object(y.jsx)(oe,{id:f,showAdd:N,showEdit:_})})]}),Object(y.jsx)(i.a,{children:Object(y.jsxs)(o.a,{xxs:"12",children:[g?Object(y.jsx)("div",{className:"loading"}):Object(y.jsx)(E,{id:f,items:v.services,openNew:function(){return A(!0)},openEdit:function(){return z(!0)},setSelectedItem:D,showAdd:N,showEdit:_,isSuperAdmin:w}),N&&Object(y.jsx)(be,{id:f,modalOpen:S,toggleModal:A,refresh:function(){return u(a,f)}}),_&&Object(y.jsx)(ue,{id:f,modalOpen:P,toggleModal:z,data:I,refresh:function(){return u(a,f)}}),Object(y.jsx)(me,{onContextMenuClick:function(e,t){switch(t.action){case"edit":D(t.data),z(!0);break;case"create-new":A(!0)}},showButtons:{showAdd:N,showEdit:_}})]})})]})}))}}]);
//# sourceMappingURL=viwes-client-one.df89dce5.chunk.js.map